{"key":"content:en:2.hospital-detection:1.data-pipeline-training-and-inference.md","generatedAt":"2021-09-06T05:41:17.204Z","mtime":"2021-09-06T05:41:17.194Z","slug":"data-pipeline-training-and-inference","title":"Data Pipeline Training and Inference","position":"000200010000","to":"/hospital-detection/data-pipeline-training-and-inference","draft":false,"page":true,"language":"en","template":"docs","layout":{"fluid":false,"asideClass":"","aside":true},"empty":false,"description":"<2021>, by ISB Institute of Data Science\nContributors: Dr. Shruti Mantri, Gokul S Kumar and Vishal Sriram\nFaculty Mentors: Dr. Manish Gangwar and Dr. Madhu Vishwanathan\nAffiliation: Indian School of Business","body":{"raw":"---\ntitle: Data Pipeline Training and Inference\ntemplate: docs\nlayout.fluid: false\nlayout.asideClass: ''\nlayout.aside: true\n---\n\n# Data Pipeline, Training, and Inference.\n\n<2021>, by ISB Institute of Data Science  \nContributors: Dr. Shruti Mantri, Gokul S Kumar and Vishal Sriram  \nFaculty Mentors: Dr. Manish Gangwar and Dr. Madhu Vishwanathan  \nAffiliation: Indian School of Business\n\n## Description\n\nRun the scripts in the following order.\n\n1. **getting_addresses_from_google.py** - Script for getting the addresses and coordinates of hospital in each city listed in \"../input/maharashtra_cities.csv\" file.\n2. **removing_duplicate_addresses.py** - Script for removing any duplicate entries in the addresses downloaded earlier.\n3. **image_download.py** - Script for downloading the hospital images in each city as per the coordinates obtained earlier.\n4. Use CVAT to label the images with the help of GEP and store the \"annotations.xml\" file in \"../input/annotations\", in seperate folders for each city. We have only considered major hospitals, hospital buildings that are located on the side of a major road and also buildings that are distinguishable from the surroundings. The building images which do not match the above criteria are not labelled and will not be considered for training.\n5. **generate_binary_masks.py** - Script for generating binary masks from the annotation XML files. The images are seperated into trainable and non-trainable\n6. **rural_urban_train_test_index.py** - Script for splitting the entire trainable data into rural and urban zones and further into train and test sets in each zone.\n7. **data_split.py** - Script for creating rural, urban and further train and test directories and storing the corresponding data-points accordingly.\n8. **train.py** - Training script. Change the input and output directories to \"rural\" and \"urban\" as per the need.\n9. **inference.py** - Script for creating predictions and calculating test set metrics. Use the respective model weights for rural and urban areas. The green mask in the prediction refers to ground truth and the red mask is the prediction by the model. The metrics are calculated for each city.\n","ast":{"type":"root","children":[{"type":"element","tag":"prose-h1","props":{"class":"d-heading-title","id":"data-pipeline-training-and-inference"},"children":[{"type":"text","value":"Data Pipeline, Training, and Inference."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{"class":"d-heading-description"},"children":[{"type":"text","value":"<2021>, by ISB Institute of Data Science"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nContributors: Dr. Shruti Mantri, Gokul S Kumar and Vishal Sriram"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nFaculty Mentors: Dr. Manish Gangwar and Dr. Madhu Vishwanathan"},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"\nAffiliation: Indian School of Business"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-h2","props":{"id":"description"},"children":[{"type":"element","tag":"prose-a","props":{"href":"#description"},"children":[{"type":"text","value":"Description"}]}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-paragraph","props":{},"children":[{"type":"text","value":"Run the scripts in the following order."}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-ol","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"getting_addresses_from_google.py"}]},{"type":"text","value":" - Script for getting the addresses and coordinates of hospital in each city listed in \"../input/maharashtra_cities.csv\" file."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"removing_duplicate_addresses.py"}]},{"type":"text","value":" - Script for removing any duplicate entries in the addresses downloaded earlier."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"image_download.py"}]},{"type":"text","value":" - Script for downloading the hospital images in each city as per the coordinates obtained earlier."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"text","value":"Use CVAT to label the images with the help of GEP and store the \"annotations.xml\" file in \"../input/annotations\", in seperate folders for each city. We have only considered major hospitals, hospital buildings that are located on the side of a major road and also buildings that are distinguishable from the surroundings. The building images which do not match the above criteria are not labelled and will not be considered for training."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"generate_binary_masks.py"}]},{"type":"text","value":" - Script for generating binary masks from the annotation XML files. The images are seperated into trainable and non-trainable"},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"rural_urban_train_test_index.py"}]},{"type":"text","value":" - Script for splitting the entire trainable data into rural and urban zones and further into train and test sets in each zone."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"data_split.py"}]},{"type":"text","value":" - Script for creating rural, urban and further train and test directories and storing the corresponding data-points accordingly."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"train.py"}]},{"type":"text","value":" - Training script. Change the input and output directories to \"rural\" and \"urban\" as per the need."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tag":"prose-li","props":{},"children":[{"type":"text","value":"\n"},{"type":"element","tag":"prose-strong","props":{},"children":[{"type":"text","value":"inference.py"}]},{"type":"text","value":" - Script for creating predictions and calculating test set metrics. Use the respective model weights for rural and urban areas. The green mask in the prediction refers to ground truth and the red mask is the prediction by the model. The metrics are calculated for each city."},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"}]}]},"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"description","depth":2,"text":"Description"}]}}}